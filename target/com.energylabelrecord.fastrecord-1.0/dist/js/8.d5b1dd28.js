(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"38sf":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{attrs:{bordered:!1}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n        内容列表\n    ")]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入角色名称"},model:{value:t.search.roleName,callback:function(e){t.$set(t.search,"roleName",e)},expression:"search.roleName"}}),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.searchSubmit}},[t._v("搜索")])],1),t._v(" "),a("Table",{attrs:{border:"",columns:t.columns,data:t.data6}}),t._v(" "),a("Page",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{total:t.totals},on:{"on-change":t.changeList}}),t._v(" "),a("Modal",{attrs:{title:"角色列表"},on:{"on-ok":t.okHandle,"on-cancel":function(t){}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Tree",{ref:"tree",attrs:{data:t.dataTree,"show-checkbox":""}})],1)],1)},o=[],i=(a("OG14"),a("vDqi")),r=a.n(i),l={name:"roleManage",data:function(){var t=this,e=function(e,a){return e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.roleHandle(a.row.id),t.modal=!0}}},"分配功能")},a=function(e,a){return e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(a.index,a.row)}}},"删除")};return{totals:10,modal:!1,currId:0,search:{roleName:""},columns:[{type:"index",width:60,align:"center",title:"编号"},{title:"ID",key:"id"},{title:"角色名称",key:"roleName"},{title:"操作",key:"action",width:220,align:"left",render:function(t,n){return t("div",[e(t,n),a(t,n)])}}],data6:[],dataTree:[]}},methods:{handleChange:function(t){this.search.date=t},okHandle:function(){var t=this,e=this.$refs.tree.getCheckedNodes(),a=[];e.map(function(t,e){a.push(t.id)}),r()({url:"/function/checkFunctions.do",methods:"POST",params:{roleId:this.currId,functionIds:a.join()}}).then(function(e){e.data.result?t.$Message.info("操作成功"):t.$Message.info(e.data.err)})},searchSubmit:function(){var t=this;r()({url:"/role/list.do",params:this.search}).then(function(e){t.totals=e.data.total,t.data6=e.data.list})},show:function(t){},roleHandle:function(t){var e=this;this.currId=t,r()({url:"/function/functionTree2.do",params:{roleId:t},methods:"get"}).then(function(t){e.dataTree=t.data})},remove:function(t,e){var a=this;this.$Modal.confirm({title:"删除",content:"是否确定删除？",onOk:function(){r()({url:"/role/delete.do",params:{id:e.id,loginName:e.loginName}}).then(function(e){e.data.result?a.data6.splice(t,1):a.$Message.warning("操作失败")})},onCancel:function(){}})},reqData:function(){var t=this;r.a.get("/role/list.do").then(function(e){t.totals=e.data.total,t.data6=e.data.list})},changeList:function(t){var e=this;r.a.get("/role/list.do?pageNum="+t).then(function(t){e.totals=t.data.total,e.data6=t.data.list})}},mounted:function(){this.reqData()}},s=l,c=a("KHd+"),d=Object(c["a"])(s,n,o,!1,null,null,null);e["default"]=d.exports},OG14:function(t,e,a){a("IU+Z")("search",1,function(t,e,a){return[function(a){"use strict";var n=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,n):new RegExp(a)[e](String(n))},a]})}}]);